language: python

cache:
  directories:
    - $HOME/miniconda3

addons:
  apt_packages:
    - pandoc

before_install:
  - . ./bin/install_miniconda.sh

install:
  - . ./bin/create_testenv.sh
  - pip install codecov
  - conda list && pip freeze

script:
  - . ./bin/test.sh
  - coverage run .bin/tests.py

after_success:
  - codecov